% Number squares paper for 18.821 Fall 2012 project 2.
% Authors: Daniel Grazian, Michael Mekonnen, Agustin O Venezuela III

\documentclass[12pt]{amsart}

% Keep everything here in alphabetical order, please! :) -jven

% Packages

\usepackage{amssymb}
\usepackage{graphicx}

% Enumeration

\newtheorem{theorem}{Theorem}[section]

\newtheorem{conjecture}[theorem]{Conjecture}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{example}[theorem]{Example}
\newtheorem{examples}[theorem]{Examples}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{remarks}[theorem]{Remarks}
\newtheorem{remark}[theorem]{Remark}

% Utility commands

% xor
\newcommand{\xor}{\oplus}
% Integers
\newcommand{\z}{\mathbb{Z}}
% Non-negative integers
\newcommand{\znn}{\mathbb{N}}
% Positive integers
\newcommand{\zp}{\mathbb{Z}^+}

\title{Number Squares}
\author{Daniel Grazian, Michael Mekonnen, Agustin O Venezuela III}
\date{October 23, 2012}

\begin{document}

\begin{abstract}
\end{abstract}

\maketitle

\section{Introduction\label{sec:intro}}

In this paper, we present an operation that acts on $4$-tuples of integers in a very simple way. Our aim is to completely understand the behavior of this operation under various starting $4$-tuples.

Our analysis has resulted in a number of observations (and of course corresponding proofs). First, we will show that for any choice of the initial $4$-tuple, continual application of the operation eventually yields the $4$-tuple of all zeroes after finitely many steps. We also provide an upper bound on the number of applications of the operation that are necessary to reach this zero state, given any starting $4$-tuple. Second, we will show that given any non-negative integer $n$, we can construct a starting $4$-tuple such that exactly $n$ applications of the operation yield the zero state. Finally, we look at interesting generalizations of this problem, such as tuples of different lengths and tuples of elements of non-integers.

\section{Definitions and Notation\label{sec:defs}}

We will now define the operation that was introduced in the previous section. Herein, we will use $\znn$ to denote the non-negative integers and $\zp$ to denote the positive integers. Also, at times when we feel it will promote clarity and ease of understanding, we will abuse the notation $n\pmod{m}$ and mean the remainder of $n$ upon division by $m$.

\begin{definition}
Given a $4$-tuple $(a, b, c, d)\in \mathbb{Z}^4$, the \underline{difference} of $(a, b, c, d)$ is the $4$-tuple $(|a - b|, |b - c|, |c - d|, |d - a|)$.
\end{definition}

As motivated in the introduction, we are interested in repeatedly applying the difference to a $4$-tuple until we reach the tuple consisting of all zeroes. In particular, we have the following definition:

\begin{definition}
Given a $4$-tuple $(a, b, c, d)\in \mathbb{Z}^4$, the \underline{(a, b, c, d) game} is the (possibly infinite) sequence of $4$-tuples $\big((a_i, b_i, c_i, d_i)\big)$, generated as follows:

\begin{enumerate}
\item $(a_0, b_0, c_0, d_0) = (a, b, c, d)$
\item $\forall i\in \znn$, if $(a_i, b_i, c_i, d_i) = (0, 0, 0, 0)$, then the $(a, b, c, d)$ game is a finite sequence ending at $(a_i, b_i, c_i, d_i)$. Otherwise, $(a_{i+1}, b_{i+1}, c_{i+1}, d_{i+1})$ is the difference of $(a_i, b_i, c_i, d_i)$.
\end{enumerate}

We will often refer to a $4$-tuple as a game itself, where it is understood that we mean the game whose first element is this $4$-tuple.

\end{definition}

Note that by this definition, the game of a $4$-tuple is either finite ending in $(0, 0, 0, 0)$ or infinite and never containing $(0, 0, 0, 0)$. Naturally, we will refer to the length of a game, meaning the (possibly infinite) length of the sequence.

\section{Finiteness of All Games\label{sec:convergence}}

We will now show that any game $(a,b,c,d)$ starting with four integers $a$, $b$, $c$, and $d$ is finite, i.e. the game terminates at the $4$-tuple $(0,0,0,0)$ in finite time (actually, as we will see, very quickly).

Before proving this claim, let us make two simplifying observation.

First, regardless of the elements in the first $4$-tuple of a game, by definition of the difference operation, the second $4$-tuple in the game will have non-negative elements. Thus, for simplicity, henceforth we will assume that all the elements in the starting $4$-tuple of a game are non-negative, for if they are not, we can just consider the game starting from the difference of the $4$-tuple.

Second, note that the games $(a,b,c,d)$ and $(b,c,d,a)$ have exactly the same length. That is, rotating a $4$-tuple does not alter the properties of the game other than changing the order of numbers as they appear in the $4$-tuples in the game. The reason for this is the cyclic nature of the difference operation: the difference of $(b,c,d,a)$ contains the same elements that are in the difference of $(a,b,c,d)$, but rotated left by $1$. Thus, the lengths of the two games are equal.

Equipped with these simplifications, we can now embark upon a proof of our claim. Let us first prove a much simpler, yet very useful, statement of the claim.

\begin{lemma}
All games starting with $4$-tuples only containing $0$'s and $1$'s have length at most $5$.
\label{lem:zerosones}
\end{lemma}

\begin{proof}
Indeed there are $16$ $4$-tuples that contain only $0$'s and $1$'s. However, we only need to consider $6$ of them, namely $(0,0,0,0)$, $(0,1,1,1)$, $(1,0,0,0)$, $(1,0,0,1)$, $(1,0,1,0)$, and $(1,1,1,1)$, since the other $10$ $4$-tuples can be obtained by appropriate rotation of one of these $6$. Based on our observation above that a rotation does not affect the length of a game, studying these $6$ $4$-tuples is sufficient.

\begin{figure}
\includegraphics{number_squares_0s_and_1s.png}
\caption{All games starting with just $0$'s and $1$'s have length at most $5$.}
\label{fig:zerosones}
\end{figure}

Figure \ref{fig:zerosones} shows a graph in which the nodes represent the $6$ $4$-tuples we are studying, and an edge from node $A$ to node $B$ indicates that the difference of $A$ is $B$. From this graph, it is clear that all of the games have finite length. Furthermore, the maximum length of such a game is $5$ (length $5$ is achieved by $(0,1,1,1)$ and $(1,0,0,0)$).

\end{proof}

We can use Lemma \ref{lem:zerosones} to make a stronger claim.

\begin{lemma}
For any $n \in \znn$, if four integer $a$, $b$, $c$, and $d$ are congruent to $0$ modulo $2^n$, then the $4$-tuple $(a_4, b_4, c_4, d_4)$ in the $(a,b,c,d)$ game will have elements that are congruent to $0$ modulo $2^{n+1}$.
\label{lem:evenodd}
\end{lemma}

\begin{proof}
Since $a$, $b$, $c$, and $d$ are congruent to $0$ modulo $2^n$, each is congruent to either $0$ or $2^n$ modulo $2^{n+1}$. Now define $\hat{a}$ to be $0$ if $a$ is congruent to $0$ modulo $2^{n+1}$ or $1$ otherwise. That is,
$$
\hat{a} = \frac{a \bmod{2^{n+1}}}{2^n}
$$
Similarly define $\hat{b}$, $\hat{c}$, and $\hat{d}$. Now if we look at the game $(\hat{a},\hat{b},\hat{c},\hat{d})$, it precisely captures whether the corresponding elements in the corresponding 4-tuples in the game $(a,b,c,d)$ are congruent to $0$ or $2^n$ modulo $2^{n+1}$. By Lemma \ref{lem:zerosones}, we know that the game $(\hat{a},\hat{b},\hat{c},\hat{d})$ terminates at $(0,0,0,0)$ after at most $5$ steps, so we know that the elements in the game $(a,b,c,d)$ will be congruent to $0$ modulo $2^{n+1}$ after at most $5$ steps.
\end{proof}

We can use this to make two conclusions that will prove our main result and also give an upper bound on the length of any game.

TODO(jven,mikemeko): I think this corollary should be the only lemma here as its probably the most important... the two lemmas above are just steps to proving this and marking this as a corollary kinda de-emphasizes it?

\begin{corollary}
For any $n \in \znn$, the $4$-tuple $(a_{4n}, b_{4n}, c_{4n}, d_{4n})$ in the $(a,b,c,d)$ game has elements that are congruent to $0$ modulo $2^n$.
\label{cor:pow2}
\end{corollary}

\begin{proof}
We prove this by induction on $n$.
Both the base case and inductive step of this inductive proof follow directly from Lemma \ref{lem:evenodd}.
\end{proof}

\begin{corollary}
Let $M=\max(a,b,c,d)$. Then the game $(a,b,c,d)$ is finite and has length at most $4\lceil\log_2{M}\rceil + 1$.
\end{corollary}

\begin{proof}
Let $n = \lceil\log_2{M}\rceil$. By Corollary \ref {cor:pow2}, the $4$-tuple $(a_{4n}, b_{4n}, c_{4n}, d_{4n})$ in the $(a,b,c,d)$ game has elements that are congruent to $0$ modulo $2^n$. However, since $M\leq2^n$, this implies that $a_{4n}=b_{4n}=c_{4n}=d_{4n}=0$.
\end{proof}

\section{Existence of Arbitrarily Long Games\label{sec:longgames}}

The previous section argued that all games are of finite length. However, we will show in this section that games may be of any arbitrarily long finite length. We state this more precisely in the following theorem:

\begin{theorem}
For all $n\in \zp$, there exists a game of length $n$.
\end{theorem}

For $n < 5$, it is very easy to construct such a game. Indeed, for $n=1,2,3,4$ we have the games $(0, 0, 0, 0)$, $(1, 1, 1, 1)$, $(1, 0, 1, 0)$, and $(1, 1, 0, 0)$, respectively.

Our plan for $n \geq 5$ is as follows: given games of a particularly nice form, we will show how to construct a game of one greater length while still preserving this form. The result is that this construction can be repeated indefinitely until a game of the desired length is reached. First, we need the following lemma:

\begin{lemma}
Suppose the game $(a, b, c, d)$ has length $n$. Then the games $(ua, ub, uc, ud)$ and $(a + v, b + v, c + v, d + v)$ for any $u, v\in \mathbb{Z}$, $u\neq 0$, also have length $n$.
\end{lemma}

\textit{Proof:} Suppose the $(a, b, c, d)$ game is $\Big((a_i, b_i, c_i, d_i)\Big)_{i=0}^{n - 1}$. Then it is clear that for $u\neq 0$, the $(ua, ub, uc, ud)$ game is $\Big((|u|a_i, |u|b_i, |u|c_i, |u|d_i)\Big)_{i=0}^{n - 1}$. Similarly, the difference of $(a + v, b + v, c + v, d + v)$ is the same as that of $(a, b, c, d)$. The result follows.

Returning to the original proof, consider a game $(0, a, b, c)$ of length $n$, where $0\leq a\leq b\leq c$ and $a + b < c$. Alter this game by doubling each element, then adding $c - b - a$ to each element. This yields the game:

$$\begin{array}{cl}
& (c - b - a, 2a + (c - b - a), 2b + (c - b - a), 2c + (c - b - a)) \\
= & (-a - b + c, a - b + c, -a + b + c, -a - b + 3c)
\end{array}$$

By the lemma above, this game also has length $n$. Furthermore, since each element of this tuple is non-negative (and in fact positive), it is the difference of the following sequence:

$$(0, -a - b + c, -2b + 2c, -a - b + 3c)$$

This game thus has length $n + 1$ since its difference yields a game of length $n$. Note also that this tuple is again of the form $(0, a', b', c')$, where $0\leq a'\leq b'\leq c'$ and $a' + b' = -a - 3b + 3c < -a - b + 3c = c'$. Thus we may iterate this process to yield a game of length $n + 2$, and so on.

It thus remains to provide a game of the desired form of length $5$. The game $(0, 1, 1, 3)$ works, and we're done. $\qed$

Note that our proof is constructive: given any $n\in \zp$, the proof gives an algorithm (and an efficient one at that) to find a length $n$ game. As an example, starting with the length $5$ game $(0, 1, 1, 3)$, we find that a length $50$ game is:

$$(0, 103502633381134336, 293873656088494080, 644020556730990592)$$

TODO(jven): Should I motivate this proof a little bit? Could be a little long-winded.

\section{Games For Other $k$-tuples}

We have thus far defined games over $4$-tuples and showed that all such games are of finite length. We can generalize the notion of a game for tuples of different lengths. In fact, the property that all games are of finite length holds for all tuple sizes of the form $2^k$. For tuple sizes not of this form, there exist games that are of infinite length.

\subsection{Existence of Infinitely Long Games}

We will first show that for tuple sizes not of the form $2^k$, there exist games of infinite length. First, we prove a useful lemma:

\begin{lemma}
Consider the game $(a_0, a_1, a_2, \ldots, a_n)$ where n is even (so the number of elements is odd) and the elements are not all equal. Let the game include a non-zero even number of odd elements. Then the game never terminates.
\label{lem:evenodds}
\end{lemma}

TODO(jven,dgrazian): I think this is phrased a bit awkwardly... can we just say that the game $(1,0,0,...,0)$ has infinite length for any odd size, then state that doubling these give all of the non-$2^k$ sizes? I think all of the generality is losing sight of the goal.

\begin{proof}
\emph{Notice that the difference of any tuple must include an even number of odd elements} (1). The number of odd elements is precisely the number of pairs of adjacent elements (with the initial and final elements considered adjacent) consisting of an even and an odd element. Walking along the tuple from $a_0$ to $a_n$ and back around to $a_0$, every even element immediately followed by an odd element must be matched by an odd element immediately followed by an even element, and vice versa. So there is an even number of such pairs and thus an even number of odd elements in the difference of the tuple.

Let $G_0$ be the initial game state described in the statement of the lemma and let $G_{i+1}, i \geq 0$ be the difference of $G_i$. We show by induction on $i$ that the game never terminates:

$G_0$ includes an even number of odd elements, by construction. Assume that $G_i$ includes a non-zero even number of odd elements. So $G_i$ includes both even and odd elements and therefore must have adjacent even and odd elements. Therefore, $G_{i+1}$ must include a non-zero number of odd elements, and that number must be even, by (1). So $G_{i+1}$ cannot be the tuple of all $0$'s. This concludes the proof of the lemma.
\end{proof}

Lemma \ref{lem:evenodds} shows that for every odd $n > 1$ there are games of size $n$ that do not terminate. For example, (1,1, 0 \ldots, 0), with an odd number of 0's, does not terminate. We now use this result to show that for every $n$ that is not an integer power of 2, there are games of size $n$ that do not terminate.

We need one more lemma to prove our claim:

\begin{lemma}
\label{lem:doubles}
If $(a_0, a_1, \ldots, a_{n})$ is a game that does not terminate, then $(a_0, a_1, \ldots, a_n, a_0, a_1, \ldots, a_n)$ also does not terminate.
\end{lemma}

\begin{proof}

The difference of $(a_0, a_1, \ldots, a_{n})$ is:

\noindent
 $(|a_0 - a_1|, |a_1 - a_2|, \ldots, |a_{n-1} - a_n|, |a_n - a_0|)$.

\vspace{.2cm}

The difference of $(a_0, a_1, \ldots, a_{n}, a_0, a_1, \ldots, a_n)$ is:

\noindent
$(|a_0 - a_1|, |a_1 - a_2|, \ldots, |a_{n-1} - a_n|, |a_n - a_0|$,

\noindent
$|a_0 - a_1|, |a_1 - a_2|, \ldots, |a_{n-1} - a_n|, |a_n - a_0|)$.

Since this is true for general values of $a_0$, \ldots, $a_n$, the $i$th sequence in the game beginning with $(a_0, a_1, \ldots, a_{n}, a_0, a_1, \ldots, a_n)$ is simply

\noindent
two appended copies of the $i$th sequence in the game beginning with $(a_0, a_1, \ldots, a_{n})$. So if $(a_0, a_1, \ldots, a_{n})$ doesn't terminate, then 

\noindent
$(a_0, a_1, \ldots, a_{n}, a_0, a_1, \ldots, a_{n})$ doesn't terminate.

\end{proof}

\begin{theorem}
\label{theorem:notPowersOfTwo}
If $n$ is an integer that is not an integer power of 2, then there is a game of size $n$ that does not terminate.
\end{theorem}

\begin{proof}

Given an integer $k > 2$ that is not an integer power of 2, $k$ can be written in the form $p \times 2^{m}$ where $p$ is an odd prime and $m$ is an integer. By Lemma \ref{lem:evenodds}, there is a game of size $p$ that does not terminate (e.g. $(1,1,0, \ldots, 0)$) By applying Lemma \ref{lem:doubles} $m$ times, we obtain a game of size $m$ that does not terminate. 
\end{proof}

\subsection{Finiteness of All $2^k$-tuple Games}

We now show that all games of $2^k$-tuples are of finite length.

\begin{theorem}
For $k\in \znn$, all games of $2^k$-tuples are finite.
\end{theorem}

Our proof strategy is the same as that of the original $4$-tuple case. We will show that given any initial tuple, after $2^k$ steps, each element of the tuple will be congruent to $0\pmod{2}$, and thus congruent to either $0$ or $2\pmod{4}$. But then after another $2^k$ steps, each element of the tuple will be congruent to $0\pmod{4}$, and so on. Now let $B$ be the maximal element of the starting tuple. (Just as in the $4$-tuple case, we assume with no loss of generality that the starting tuple consists only of non-negative integers.) Choosing $e$ so that $2^e>B$, it is clear that after $2^ke$ steps, all elements of the tuple will be congruent to $0\pmod{2^e}$, and thus equal to $0$, as desired.

The only statement in our proposed strategy that does not obviously generalize from our proof in the $4$-tuple case is the fact that any game for a $2^k$-tuple of $0$s and $1$s is finite and of length at most $2^k+1$. It thus suffices to prove this statement. We will do so by finding a binary operation (a ``sum'') on these tuples of $0$s and $1$s that commutes with the difference operator. We will next construct a ``basis'' of such tuples whose games are known to be of finite length. Finally, we exhibit that all tuples of $0$s and $1$s can be expressed as a sum of tuples in this basis. The commutativity of the operators then allows us to conclude that all tuples of $0$s and $1$s yield games of finite length.

\begin{definition}
Let $(a_i),(b_i)$ be $n$-tuples whose elements are $0$ or $1$. The \textbf{exclusive or} $(a_i)\xor (b_i)$ (herein referred to as \textbf{xor}) is the $n$-tuple whose $i^{th}$ element is $(a_i+b_i)\pmod{2}$. For example, $(0,1,0,1)\xor(0,0,1,1)=(0,1,1,0)$. It is clear that $\xor$ is commutative and associative.
\end{definition}

We now show that xor commutes with the difference operator. We will denote the difference of the tuple $(a_i)$ as $D((a_i))$.

\begin{lemma}
Let $(a_i),(b_i)$ be $n$-tuples whose elements are $0$ or $1$. Then $D((a_i)\xor (b_i))=D((a_i))\xor D((b_i))$.
\end{lemma}

\textit{Proof}: The key observation is that when $u,v\in \{0,1\}$, $|u-v|=(u+v)\pmod{2}$. We have that the $i^{th}$ element of $D((a_i)\xor (b_i))$ is

$$\begin{array}{cl}
& |(a_i+b_i)\pmod{2} - (a_{i+1}+b_{i+1})\pmod{2}| \\
= & (a_i+a_{i+1}+b_i+b_{i+1})\pmod{2}
\end{array}$$

(In the case $i=n-1$, take $i+1$ to be $0$.) The $i^{th}$ element of $D((a_i))\xor D((b_i))$ is

$$\begin{array}{cl}
& (|a_i-a_{i+1}|+|b_i-b_{i+1}|)\pmod{2} \\
= & (a_i+a_{i+1}+b_i+b_{i+1})\pmod{2}
\end{array}$$

The result follows. $\qed$

We now construct a set of $2^k$-tuples over $\{0,1\}$ such that (i) all tuples in the set yield games of finite length and (ii) any $2^k$-tuple over $\{0,1\}$ can be written as the xor of tuples in the set.

\begin{lemma}
The game for any $2^k$-tuple consisting of $2^k-1$ $0$s and one $1$ is finite and of length $2^k+1$.
\end{lemma}

\textit{Proof}: We need only show that this holds for the tuple $(0,0,\ldots,0,1)$. The other such tuples follow by the fact that game length is invariant under ``cycling'' of tuples, as demonstrated in the $4$-tuple case.

We proceed by induction on $k$. We strengthen our induction hypothesis by not only requiring that the game $(0,0,\ldots,0,1)$ is finite and of length $2^k+1$ but also that a $1$ does not appear as the first element until the penultimate tuple $(1,1,\ldots,1,1)$. For $k=0$, the game $(1)$ is $((1),(0))$, which is of length $2=2^0+1$, and trivially does not have a $1$ as the first element until the penultimate tuple $(1)$.

Now suppose the result holds for some $k\in \znn$ and consider the $2^{k+1}$-tuple game $(0,0,\ldots,0,0,0,0,\ldots,0,1)$. Note that throughout the game, the last $2^k$ elements of the tuple will proceed as the $2^k$-tuple case so long as the first element of the tuple is $0$ and that the first $2^k$ elements of the tuple will remain $0$ until the $(2^k+1)^{th}$ element (the first element of the second half) is $1$. By our induction hypothesis, we have both of these guarantees, so that after $2^k-1$ steps, the tuple is $(0,0,\ldots,0,0,1,1,\ldots,1,1)$. After one more step, we have $(0,0,\ldots,0,1,0,0,\ldots,0,1)$. Now again, the first $2^k$ elements and the last $2^k$ elements will each proceed as in the $2^k$-tuple case so long as the first and $(2^k+1)^{th}$ elements are $0$. By the induction hypothesis, we again have this, so that after a total of $2^{k+1}-1$ steps, we have $(1,1,\ldots,1,1,1,1,\ldots,1,1)$. One more step yields the zero tuple, after a total of $2^{k+1}$ steps, corresponding to a game length of $2^{k+1}+1$. This completes our induction. $\qed$

\begin{lemma}
The game for any $2^k$-tuple over $\{0,1\}$ is finite and of length at most $2^k+1$.
\end{lemma}

\textit{Proof:} Consider the set $S$ of all $2^k$-tuples consisting of $2^k-1$ $0$s and one $1$:

$$\begin{array}{c}
(1,0,\ldots,0,0) \\
(0,1,\ldots,0,0) \\
\vdots \\
(0,0,\ldots,1,0) \\
(0,0,\ldots,0,1)
\end{array}$$

By our previous lemma, taking successive differences of each of these tuples yields the zero tuple in exactly $2^k+1$ steps. Furthermore, it is clear that any $2^k$-tuple of $0$s and $1$s can be written as an xor of tuples in this list. (For example, $(1,1,0,1)=(1,0,0,0)\xor(0,1,0,0)\xor(0,0,0,1)$.) Let $(a_i)$ be such a tuple and suppose it decomposes into the xor of the tuples in $S'\subset S$. That is, $(a_i)=\xor_{s\in S'} s$. Now $D^{2^k+1}((a_i))=D^{2^k+1}(\xor_{s\in S'} s)=\xor_{s\in S'} D^{2^k+1}(s)=\xor_{s\in S'} (0,0,\ldots,0,0) = (0,0,\ldots,0,0)$. Thus the game $(a_i)$ is finite and of length at most $2^k+1$, as desired. $\qed$

This lemma, together with the proof as outlined previously in this section, allow us to conclude that all games for tuples of size $2^k$ are finite.

\section{Games Over Non-Integers}

We will return from our investigation of $k$-tuples in the previous section and again focus on $4$-tuples. To begin, we will extend our notion of a game to allow for $4$-tuples of rational numbers.

\begin{theorem}
All games of $4$-tuples over $\mathbb{Q}$ are finite.
\end{theorem}

The proof of this follows very easily from the fact that game length is invariant under the operation of scaling each element of the $4$-tuple by a non-zero quantity. We used this fact in our construction of arbitrarily long games in Section $\ref{sec:longgames}$. (Note that the lemma in that section dealt only with integers but the argument is easily extended to any reals.)

Indeed, given a game $\left(\dfrac{a}{p}, \dfrac{b}{q}, \dfrac{c}{r}, \dfrac{d}{s}\right)$ over rationals, it is clear that the game will progress the same as the game $(a, b, c, d)$ over the integers, with each tuple in the sequence scaled by $\dfrac{1}{pqrs}$. The result follows.

A more interesting question arises when we instead consider game of $4$-tuples over $\mathbb{R}$. Unlike games over the integers, there are games over the reals that do not terminate. However, we did discover a large class of terminating games over the reals:

\begin {theorem}
\label{thm:inequalities}
Given a game $G_0 =  (a, b, c, d)$, if $a \leq c \leq b \leq d$, or if $a \leq d \leq c \leq b$, then $G_0$ terminates in 4 steps. 
\end{theorem}

\begin{proof}
Consider a game $(a,b,c,d)$ and assume $a \leq c \leq b \leq d$. The difference of $G_0 =  (a, b, c, d)$ is:

\begin{align*}
G_1 &= (|a-b|, |b-c|, |c-d|, |d-a|) \\
&=(b-a, b-c, d-c, d-a)\\
Then, \\
G_2 &= (|(b-a) - (b-c)|, |(b-c) - (d-c)|, |(d-c) - (d-a)|, |(d-a) - (b-a)| \\
&= (c-a, d-b, c-a, d-b)\\
G_3 &= (|c + b - a - d|, |a + d - c - b|, |c + b - a - d|, |a + d - c - b|)\\
G_4 &= (0,0,0,0)
\end{align*}

The proof for the case when $a \leq d \leq c \leq b$ is analogous. The result also holds for any cyclic rotation of the inequalities (e.g., such as if $c \leq b \leq d \leq a$.)
\end{proof}

Theorem \ref{thm:inequalities} implies that if any of the inequalities given in Theorem \ref{thm:inequalities} are met during the course of a game, then that game will terminate in four more steps.

\section{Non-terminating $4$-tuple Games\label{sec:nonterminating}}

TODO(mikemeko) naming this section might not be necessary.

We have shown that $4$-tuple games that start with $4$ rational numbers always terminate. Now we will demonstrate, by example, that there exist $4$-tuple games that actually do not terminate.

Consider the game
$$
(1,x,x^2,x^3)
$$
where $x$ is a real number greater than $1$ that we will define shortly. Note that the difference of this $4$-tuple is
\begin{align*}
& (x-1, x^2 - x, x^3 - x^2, x^3 - 1)\\
= & (x-1) (1, x, x^2, x^2 + x + 1).
\end{align*}
If we choose $x$ such that $x^2 + x + 1 = x^3$, then we see that the difference of $(1,x,x^2,x^3)$ is a multiple of itself, which shows us that the game will never terminate. The only real (and irrational) solution to $x^2 + x + 1 = x^3$, which is approximately $1.839$, satisfies the condition of being greater than $1$, so we have indeed constructed a non-terminating $4$-tuple game.
\end{document}